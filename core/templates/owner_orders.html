{% extends "base.html" %}
{% block title %}Manage Orders{% endblock %}
{% block content %}
<h3>Manage Orders</h3>
<table class="table">
  <thead><tr><th>ID</th><th>Customer</th><th>Date</th><th>Total</th><th>Status</th><th>Action</th></tr></thead>
  <tbody>
    {% for o in orders %}
    <tr>
      <td>#{{ o.id }}</td>
      <td>{{ o.full_name }}<br><small>{{ o.email }}</small></td>
      <td>{{ o.created_at|date:"d M Y H:i" }}</td>
      <td>â‚¹ {{ o.total }}</td>
      <td><span class="badge bg-dark">{{ o.get_status_display }}</span></td>
      <td>
        <form action="{% url 'core:owner_update_order_status' o.id %}" method="post" class="d-flex gap-2">
          {% csrf_token %}
          <select name="status" class="form-select form-select-sm">
            {% for key,label in o._meta.get_field('status').choices %}
              <option value="{{ key }}" {% if o.status==key %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
          <input name="note" class="form-control form-control-sm" placeholder="Note (optional)">
          <button class="btn btn-pjp btn-sm">Update</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

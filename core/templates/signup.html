{% extends "base.html" %}
{% load static %}
{% block title %}Sign Up - Premium Jewel Pack{% endblock %}

{% block content %}
<div class="auth-container">
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-7">
        <div class="auth-card">
          <!-- Logo/Brand Section -->
          <div class="auth-header text-center mb-4">
            <div class="auth-logo">
              <i class="fas fa-user-plus"></i>
            </div>
            <h2 class="auth-title">Join Premium Jewel Pack</h2>
            <p class="auth-subtitle">Create your account to start shopping</p>
          </div>

          <!-- Signup Form -->
          <form method="post" class="auth-form">
            {% csrf_token %}
            
            <!-- Display any error messages -->
            {% if form.errors %}
              <div class="alert alert-danger">
                {% for field, errors in form.errors.items %}
                  {% for error in errors %}
                    <div>{{ error }}</div>
                  {% endfor %}
                {% endfor %}
              </div>
            {% endif %}

            <!-- Personal Information Section -->
            <div class="form-section mb-4">
              <h6 class="form-section-title">
                <i class="fas fa-user me-2"></i>Personal Information
              </h6>
              
              <!-- Name Field -->
              <div class="form-group mb-3">
                <label for="{{ form.full_name.id_for_label }}" class="form-label">
                  <i class="fas fa-id-card me-2"></i>
                  {{ form.full_name.label }}
                </label>
                {{ form.full_name }}
              </div>

              <!-- Email Field -->
              <div class="form-group mb-3">
                <label for="{{ form.email.id_for_label }}" class="form-label">
                  <i class="fas fa-envelope me-2"></i>
                  {{ form.email.label }}
                </label>
                {{ form.email }}
              </div>

              <!-- Mobile Number Field -->
              <div class="form-group mb-3">
                <label for="{{ form.mobile_number.id_for_label }}" class="form-label">
                  <i class="fas fa-phone me-2"></i>
                  {{ form.mobile_number.label }}
                </label>
                {{ form.mobile_number }}
              </div>
            </div>

            <!-- Business Information Section -->
            <div class="form-section mb-4">
              <h6 class="form-section-title">
                <i class="fas fa-building me-2"></i>Business Information
              </h6>
              
              <!-- Firm Name Field -->
              <div class="form-group mb-3">
                <label for="{{ form.firm_name.id_for_label }}" class="form-label">
                  <i class="fas fa-store me-2"></i>
                  {{ form.firm_name.label }}
                </label>
                {{ form.firm_name }}
              </div>

              <!-- Address Field -->
              <div class="form-group mb-3">
                <label for="{{ form.address.id_for_label }}" class="form-label">
                  <i class="fas fa-map-marker-alt me-2"></i>
                  {{ form.address.label }}
                </label>
                {{ form.address }}
              </div>
            </div>

            <!-- Account Security Section -->
            <div class="form-section mb-4">
              <h6 class="form-section-title">
                <i class="fas fa-lock me-2"></i>Account Security
              </h6>
              
              <!-- Username Field -->
              <div class="form-group mb-3">
                <label for="{{ form.username.id_for_label }}" class="form-label">
                  <i class="fas fa-user me-2"></i>
                  Username
                </label>
                {{ form.username }}
              </div>

              <!-- Password Field -->
              <div class="form-group mb-3">
                <label for="{{ form.password1.id_for_label }}" class="form-label">
                  <i class="fas fa-key me-2"></i>
                  {{ form.password1.label }}
                </label>
                <div class="password-input-container">
                  {{ form.password1 }}
                  <button type="button" class="password-toggle" onclick="togglePassword('password1')">
                    <i class="fas fa-eye" id="password1ToggleIcon"></i>
                  </button>
                </div>
              </div>

              <!-- Confirm Password Field -->
              <div class="form-group mb-4">
                <label for="{{ form.password2.id_for_label }}" class="form-label">
                  <i class="fas fa-check-circle me-2"></i>
                  {{ form.password2.label }}
                </label>
                <div class="password-input-container">
                  {{ form.password2 }}
                  <button type="button" class="password-toggle" onclick="togglePassword('password2')">
                    <i class="fas fa-eye" id="password2ToggleIcon"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- Signup Button -->
            <button type="submit" class="btn btn-auth-primary">
              <i class="fas fa-user-plus me-2"></i>
              Create Account
            </button>
          </form>

          <!-- Login Link -->
          <div class="auth-footer text-center mt-4">
            <p class="auth-link-text">
              Already have an account? 
              <a href="{% url 'core:login' %}" class="auth-link">Sign in here</a>
            </p>
          </div>

          <!-- Additional Links -->
          <div class="auth-extra-links text-center mt-3">
            <a href="{% url 'core:home' %}" class="extra-link">
              <i class="fas fa-arrow-left me-1"></i>
              Back to Home
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Custom CSS for Auth Pages -->
<style>
.auth-container {
  background: linear-gradient(135deg, #fff8dc 0%, #f5e6a3 100%);
  min-height: 100vh;
  display: flex;
  align-items: center;
  position: relative;
}

.auth-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23f0c808' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='4'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  z-index: 1;
}

.auth-card {
  background: white;
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.1);
  position: relative;
  z-index: 2;
  backdrop-filter: blur(10px);
}

.auth-header {
  margin-bottom: 2rem;
}

.auth-logo {
  width: 80px;
  height: 80px;
  background: linear-gradient(135deg, var(--pjp-yellow), var(--pjp-yellow-dark));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1.5rem;
  font-size: 2rem;
  color: white;
  box-shadow: 0 10px 30px rgba(240, 200, 8, 0.3);
}

.auth-title {
  color: var(--pjp-text-dark);
  font-weight: 700;
  margin-bottom: 0.5rem;
}

.auth-subtitle {
  color: var(--pjp-text);
  margin-bottom: 0;
}

.auth-form {
  margin-bottom: 1.5rem;
}

.form-section {
  background: #f8f9fa;
  border-radius: 15px;
  padding: 25px;
  border: 1px solid #e9ecef;
}

.form-section-title {
  color: var(--pjp-text-dark);
  font-weight: 600;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 2px solid var(--pjp-yellow);
  display: inline-block;
}

.form-section-title i {
  color: var(--pjp-yellow-dark);
}

.form-group {
  position: relative;
}

.form-label {
  font-weight: 600;
  color: var(--pjp-text-dark);
  margin-bottom: 0.5rem;
  display: block;
}

.form-label i {
  color: var(--pjp-yellow-dark);
}

.auth-form input,
.auth-form textarea {
  width: 100%;
  padding: 15px 20px;
  border: 2px solid #e9ecef;
  border-radius: 12px;
  font-size: 1rem;
  transition: all 0.3s ease;
  background: white;
}

.auth-form input:focus,
.auth-form textarea:focus {
  border-color: var(--pjp-yellow);
  box-shadow: 0 0 0 0.2rem rgba(240, 200, 8, 0.25);
  outline: none;
  background: white;
}

.password-input-container {
  position: relative;
}

.password-toggle {
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: #6c757d;
  cursor: pointer;
  padding: 5px;
  border-radius: 4px;
  transition: color 0.3s ease;
}

.password-toggle:hover {
  color: var(--pjp-yellow-dark);
}

.btn-auth-primary {
  width: 100%;
  background: var(--pjp-yellow);
  color: var(--pjp-text-dark);
  border: none;
  padding: 15px;
  border-radius: 12px;
  font-weight: 600;
  font-size: 1.1rem;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(240, 200, 8, 0.3);
}

.btn-auth-primary:hover {
  background: var(--pjp-yellow-dark);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(240, 200, 8, 0.4);
}

.auth-footer {
  padding-top: 1.5rem;
  border-top: 1px solid #e9ecef;
}

.auth-link-text {
  color: var(--pjp-text);
  margin-bottom: 0;
}

.auth-link {
  color: var(--pjp-yellow-dark);
  text-decoration: none;
  font-weight: 600;
  transition: all 0.3s ease;
}

.auth-link:hover {
  color: var(--pjp-text-dark);
  text-decoration: underline;
}

.auth-extra-links {
  margin-top: 1rem;
}

.extra-link {
  color: var(--pjp-text);
  text-decoration: none;
  font-size: 0.9rem;
  transition: color 0.3s ease;
}

.extra-link:hover {
  color: var(--pjp-yellow-dark);
}

.alert {
  border-radius: 12px;
  border: none;
  padding: 15px;
  margin-bottom: 1.5rem;
}

.alert-danger {
  background: rgba(220, 53, 69, 0.1);
  color: #721c24;
  border-left: 4px solid #dc3545;
}

@media (max-width: 768px) {
  .auth-card {
    padding: 30px 20px;
    margin: 20px;
  }
  
  .auth-logo {
    width: 60px;
    height: 60px;
    font-size: 1.5rem;
  }
  
  .form-section {
    padding: 20px 15px;
  }
}
</style>

<script>
function togglePassword(fieldType) {
  const passwordField = document.getElementById('id_' + fieldType);
  const toggleIcon = document.getElementById(fieldType + 'ToggleIcon');
  
  if (passwordField.type === 'password') {
    passwordField.type = 'text';
    toggleIcon.classList.remove('fa-eye');
    toggleIcon.classList.add('fa-eye-slash');
  } else {
    passwordField.type = 'password';
    toggleIcon.classList.remove('fa-eye-slash');
    toggleIcon.classList.add('fa-eye');
  }
}
</script>

{% endblock %}
